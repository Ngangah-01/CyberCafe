<!DOCTYPE html>
<html lang="en">

<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'styles/styles.css' %}">
  <title>Payments - Daryeel Cyber Cafe</title>
</head>

<body class="dashboard-body">
  <div class="background-effects" aria-hidden="true">
    <div class="glow glow-one"></div>
    <div class="glow glow-two"></div>
    <div class="glow glow-three"></div>
    <div class="grid-overlay"></div>
  </div>

  <header class="header">
    <div class="header-content">
      <div class="brand-cluster">
        <div class="logo">üñ•Ô∏è Daryeel Cyber Cafe</div>
        <p class="tagline">Money-in dashboard</p>
      </div>
      <div class="header-meta">
        <span class="today">{% now "l, M d" %}</span>
        <div class="user-info">Reconcile receipts & balances</div>
      </div>
    </div>
  </header>

  <main class="page-shell">
    <div class="page-header-block">
      <div>
        <p class="eyebrow">Billing</p>
        <h1>Payment ledger</h1>
        <p class="page-meta">Every receipt, timestamp, and balance impact captured from the floor in one clean view.</p>
      </div>
      <div class="page-actions">
        <a href="{% url 'add_payment' %}" class="btn btn-primary">Record payment</a>
        <a href="{% url 'home' %}" class="btn btn-ghost">Dashboard</a>
      </div>
    </div>

    <section class="data-card">
      {% if payments %}
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Student</th>
              <th>Amount (KSH)</th>
              <th>Balance</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for payment in payments %}
            <tr>
              <td>
                <strong>{{ payment.student.firstname }} {{ payment.student.lastname }}</strong>
                <p class="kpi-foot">ID {{ payment.student.idnumber }}</p>
              </td>
              <td>
                <span class="amount-chip">+{{ payment.amount|floatformat:2 }}</span>
              </td>
              <td>{{ payment.balance|floatformat:2 }}</td>
              <td>{{ payment.date|date:"M d, Y" }}</td>
              <td class="table-actions">
                <a href="{% url 'student_detail' payment.student.idnumber %}" class="btn btn-secondary">Profile</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="no-sessions">
        <p>No payments found. Record your first transaction to populate this ledger.</p>
      </div>
      {% endif %}
    </section>

    <div class="page-foot-links">
      <a href="{% url 'students_list' %}" class="btn btn-secondary">Student list</a>
      <a href="{% url 'home' %}" class="link-arrow">‚Üê Back to dashboard</a>
    </div>
  </main>
</body>

</html>